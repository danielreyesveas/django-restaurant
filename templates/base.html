{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <title>Café Cuqui</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" href="{%  static 'site_static/img/favicon.ico' %}">

    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:300,400,700,800|Open+Sans:300,400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Enriqueta&family=Reenie+Beanie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Neucha&display=swap" rel="stylesheet">



    <link rel="stylesheet" href="{% static 'site_static/css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'site_static/css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'site_static/css/owl.carousel.min.css' %}">

    <link rel="stylesheet" href="{% static 'site_static/css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'site_static/css/aos.css' %}">

    <link rel="stylesheet" href="{% static 'site_static/css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'site_static/css/jquery.timepicker.css' %}">

    <link rel="stylesheet" href="{% static 'site_static/fonts/ionicons/css/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'site_static/fonts/fontawesome/css/font-awesome.min.css' %}">

    <link rel="stylesheet" href="{% static 'site_static/fonts/flaticon/font/flaticon.css' %}">

    <!-- Theme Style -->
    <link rel="stylesheet" href="{% static 'site_static/css/style.css' %}?v={% now 'U' %}">
  </head>
  <body>
    

    <div class="site-wrap">
      
      <nav class="site-menu">
        <div class="site-menu-inner">
          <ul class="list-unstyled">
            <li class="active"><a href="{% url 'home:home' %}">Inicio</a></li>
            <li><a href="{% url 'about:about' %}">Nosotros</a></li>
            <li><a href="{% url 'meals:meals' %}">Nuestro Menú</a></li>
            <!-- <li><a href="{% url 'blog:posts' %}">Our Blog</a></li> -->
            <li><a href="{% url 'reservation:reserve_table' %}">Reservas</a></li>
            <li><a href="{% url 'contact:contact' %}">Contacto</a></li>
          </ul>
        </div>
      </nav>

      <header class="site-header">
        <div class="d-flex justify-content-between">
          <div class="col-4 col-md-3">
             <ul class="list-unstyled social">
              <li></li>
            </ul>
          </div>
          <div class="col-4 col-md-6 text-center">
            <a href="{% url 'home:home' %}" class="site-logo">C</a>
          </div>
          <div class="col-4 col-md-3 text-right menu-burger-wrap">
            <a href="#" class="site-nav-toggle js-site-nav-toggle"><i></i></a>
          </div>
        </div>
       
      </header>
      
      {% block body %}

      {% endblock body %}
      
      <footer>
        <div class='wave-top'></div>

        <div class="site-footer">
          <div class="container">
            <div class="row small-gutters">
              <div class="col-md-6 col-lg-4" data-aos="fade" data-aos-delay="100">
                <div class="footer-widget">
                  <h3>Café Cuqui</h3>
                  <p>Te espero con un café, y si vienes trae contigo tu vida entera. Es que hay tanto de que hablar.</p>
                </div>
              </div>
              <div class="col-md-6 col-lg-4" data-aos="fade" data-aos-delay="200">
                <div class="footer-widget">
                  <h3>Desayuno</h3>
                  <p>08:00am - 11:00am</p>
                  <h3>Brunch</h3>
                  <p>11:00am - 16:00pm</p>
                  <h3>Once</h3>
                  <p>16:00pm - 21:00pm</p>
                </div>
              </div>

              <div class="col-md-12 col-lg-4" data-aos="fade" data-aos-delay="400">
                <div class="footer-widget footer-contact-widget">

                  <h3>Suscríbete</h3>
                  <p>Recibe noticias, eventos y novedades cuquis.</p>
                  <form novalidate class="form-subscribe">
                    <div class="form-group form-field">
                      <input type="submit" id="newsletter_btn" value="Enviar" class="btn btn-primary">
                      <input type="text" id="newsletter_email" name="newsletter_email" class="form-control" placeholder="Email">
                    </div>
                  </form>

                  <h3>Escríbenos</h3>
                  <p class="contact-email">cafecuqui@reciclatusanimales.com</p>                  
                  
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </footer>

      <div class="site-footer-copyright">
        <div class="container">
          <div class="row">
            <p class="footer-text col-md-12">
              &copy;<script>document.write(new Date().getFullYear());</script> Café Cuqui
            </p>
          </div>
        </div>
      </div>

    </div>

    <!-- loader -->
    <div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#f4b214"/></svg></div>

    <script src="{% static 'site_static/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'site_static/js/jquery-migrate-3.0.1.min.js' %}"></script>
    <script src="{% static 'site_static/js/popper.min.js' %}"></script>
    <script src="{% static 'site_static/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'site_static/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'site_static/js/jquery.waypoints.min.js' %}"></script>

    <script src="{% static 'site_static/js/bootstrap-datepicker.js' %}"></script>
    <script src="{% static 'site_static/js/jquery.timepicker.min.js' %}"></script>
    <script src="{% static 'site_static/js/jquery.stellar.min.js' %}"></script>

    <script src="{% static 'site_static/js/aos.js' %}"></script>  

    <script src="{% static 'site_static/js/main.js' %}?v={% now 'U' %}"></script>

    <script>
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
      }

      (function() {

        const subscribe_newsletter_url = "{% url 'contact:subscribe_newsletter' %}"
        const newsletter_btn = document.getElementById("newsletter_btn");

        newsletter_btn.addEventListener("click", function(event) {
            event.preventDefault()

            // TODO: spinner

            const email_input = document.getElementById("newsletter_email")
            const email = email_input.value

            if(email === ""){
                email_input.classList.add("input-error");
            }else{
                email_input.classList.remove("input-error");
            }
            
            if(email){
                fetch(subscribe_newsletter_url, {
                    credentials: 'include',
                    method: 'POST',
                    headers: {
                        "X-CSRFToken": getCookie("csrftoken"),
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        email
                    })
                }).then(
                    response => response.json()
                ).then(function(data) {
                    if(data.success){
                        console.log("OK")
                        email_input.value = ""

                        // TODO: success message
                    }else{
                        console.log("NOTOK")
                        // TODO: success message
                    }          
                })      
            }
        })
      })()
    </script>

    {% block extra_scripts %}{% endblock extra_scripts %}
  </body>
</html>